<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EngBot</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="main.js">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a href="" class="navbar-item">
                <span class="navbar-text">Home</span>
                <i id="icon" class="fas fa-home"></i>
            </a>
            <a href="#" class="navbar-item">
                <span class="navbar-text">Profile</span>
                <i id="icon" class="fas fa-user"></i>
            </a>
        </div>
    </nav>
    <div>
        <div id="learned">
            <h1>Learnedüìñ</h1>
            <center><h2 onclick="replaceText()" id="words_learned" style="pointer-events: none;">Loading...</h2></center>
        </div>
    </div>
    <div id="continue_learn">
        <center><a href="http://127.0.0.1:5500/src/frontend/task.html"><button>Continue</button></a></center>
    </div>
    <div id="social-links">
        <a href="https://www.youtube.com/" target="_blank" class="social-link">YouTube: <i class="fab fa-youtube"></i></a>
        <a href="https://telegram.org/" target="_blank" class="social-link">Telegram: <i class="fab fa-telegram"></i></a>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <script>
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ cookie "id" —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º "1529997307"
        let tg = window.Telegram;
        if (tg != undefined) {
            if (tg.WebApp != undefined && tg.WebApp.initData != undefined) {
                let safe = tg.WebApp.initData;
                // –ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                let userId = safe.user.id;
                // –û—Ç–ø—Ä–∞–≤–∫–∞ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–∞–π—Ç
                // –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JavaScript –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
                // –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –≥–¥–µ –æ–Ω–∏ –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã
            }
        }

        async function sendData() {
            const url = 'https://eng-bot-sever.vercel.app/all_data?id_tg=' + userId; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à URL API

            const myVariable = { tg_id: userId }; // –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

            try {
                const response = await axios.post(url, myVariable, {
                    headers: {
                        'Content-Type': 'application/json', // –£–∫–∞–∑—ã–≤–∞–µ–º —Ç–∏–ø —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
                    },
                });

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
                replaceText(response.data.data.words); // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª–µ–º words
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö:', error);
            }
        }

        function replaceText(newText) {
            document.getElementById("words_learned").innerHTML = newText;
        }

        // –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        sendData();

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Telegram WebApp
        if (tg != undefined && tg.WebApp != undefined) {
            tg = tg.WebApp;
            tg.initData = '';
            tg.colorScheme = 'dark';
            tg.backgroundColor = '#121212';
            tg.headerColor = '#121212';
            tg.mainButtonColor = '#121212';
            tg.mainButtonTextColor = '#ffffff';
        }
    </script>
</body>
</html>